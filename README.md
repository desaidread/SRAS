# Stealth Remote Access System

Профессиональная система удаленного доступа на C++ с поддержкой скрытого режима, автозагрузки и удаленного подключения.

## Компоненты системы

### Базовые компоненты
- `server.cpp` - Базовый TCP сервер
- `client.cpp` - Базовый TCP клиент

### Продвинутые компоненты  
- `advanced_server.cpp` - Расширенный сервер с дополнительными функциями
- `advanced_client.cpp` - Расширенный клиент с улучшенным интерфейсом

### Stealth компоненты
- `stealth_server.cpp` - **Скрытый сервер с автозагрузкой и маскировкой**
- `remote_client.cpp` - **Клиент для удаленного подключения**

### Вспомогательные файлы
- `install.bat` - **Автоматический установщик системы**
- `Makefile` - Автоматическая сборка всех компонентов
- `build.bat` - Скрипт сборки для Windows
- `compile.bat` - Альтернативный скрипт компиляции
- `config.ini` - Расширенный файл конфигурации
- `README.md` - Документация
- `SECURITY_WARNING.txt` - Предупреждения безопасности

## Быстрая установка

### Автоматическая установка (рекомендуется)
```cmd
install.bat
```
Этот скрипт:
- Компилирует все компоненты
- Предлагает установку stealth сервера
- Настраивает автозагрузку
- Конфигурирует firewall
- Тестирует соединение

## Компиляция

### Использование Makefile (рекомендуется)
```bash
make all                    # Собрать все компоненты
make stealth_server         # Собрать stealth сервер
make remote_client          # Собрать удаленный клиент
make install_stealth        # Установить stealth сервер
make test_local             # Тестировать локальное соединение
make scan                   # Сканировать порты
make clean                  # Удалить исполняемые файлы
```

### Альтернативная компиляция через g++
```bash
# Stealth сервер (с автозагрузкой)
g++ -std=c++11 -O2 -s stealth_server.cpp -o stealth_server.exe -lws2_32 -lshell32 -ladvapi32

# Удаленный клиент
g++ -std=c++11 -O2 -s remote_client.cpp -o remote_client.exe -lws2_32

# Базовые компоненты
g++ -std=c++11 -O2 server.cpp -o server.exe -lws2_32
g++ -std=c++11 -O2 client.cpp -o client.exe -lws2_32
```

## Использование

### Stealth Server (рекомендуется для удаленного доступа)
```cmd
# Автоматическая установка и запуск
stealth_server.exe

# Запуск на определенном порту
stealth_server.exe 8080
```

**Особенности Stealth Server:**
- Автоматическая установка в автозагрузку
- Маскировка под системный процесс "Windows Security Update"
- Скрытие консольного окна
- Поддержка удаленных подключений (0.0.0.0)
- Многопоточная обработка клиентов
- Защита от повторного запуска

### Remote Client (для удаленного подключения)
```cmd
# Подключение к локальному серверу
remote_client.exe

# Подключение к удаленному серверу
remote_client.exe 192.168.1.100
remote_client.exe 10.0.0.5 8080

# Сканирование портов
remote_client.exe 192.168.1.100 0 scan 1 1000
```

### Базовые компоненты
```cmd
# Обычный сервер
server.exe

# Обычный клиент
client.exe 192.168.1.100
```

## Функциональность

## Настройка удаленного доступа

### 1. Настройка сервера
```cmd
# Запуск stealth сервера (автоматическая настройка)
stealth_server.exe
```

### 2. Настройка сети

**Локальная сеть:**
- Сервер автоматически слушает на всех интерфейсах (0.0.0.0:4444)
- Настройте Windows Firewall или используйте `install.bat`

**Интернет (через роутер):**
1. Настройте Port Forwarding на роутере:
   - Внешний порт: 4444 (или любой другой)
   - Внутренний порт: 4444
   - IP: адрес компьютера с сервером

2. Узнайте внешний IP:
   ```cmd
   # На сервере выполните:
   curl ifconfig.me
   # или
   nslookup myip.opendns.com resolver1.opendns.com
   ```

3. Подключение извне:
   ```cmd
   remote_client.exe YOUR_EXTERNAL_IP 4444
   ```

**Использование DDNS (рекомендуется):**
- Настройте DDNS (No-IP, DynDNS, etc.)
- Подключайтесь по доменному имени:
   ```cmd
   remote_client.exe yourdomain.ddns.net 4444
   ```

### 3. Настройка безопасности

**Смена порта:**
```cmd
# Запуск на нестандартном порту
stealth_server.exe 8443
```

**Firewall правила:**
```cmd
# Автоматическая настройка через install.bat
install.bat

# Или вручную:
netsh advfirewall firewall add rule name="MyApp" dir=in action=allow protocol=TCP localport=4444
```

## Доступные команды

### Навигация и файлы
- `cd <путь>` - Смена директории
- `pwd` - Показать текущую директорию  
- `dir` / `ls` - Список файлов
- `download <файл>` - Скачать содержимое файла

### Системная информация
- `sysinfo` - Детальная информация о системе
- `whoami` - Текущий пользователь
- `ipconfig` - Сетевая конфигурация
- `netstat` - Сетевые соединения

### Управление процессами
- `tasklist` - Список процессов
- `processes` - Список процессов с PID (advanced)
- `kill <PID>` - Завершение процесса (advanced)

### Клиентские команды
- `help` - Показать справку
- `clear` / `cls` - Очистить экран
- `reconnect` - Переподключиться
- `exit` / `quit` - Завершение соединения

### Утилиты
- Сканирование портов:
  ```cmd
  remote_client.exe TARGET_IP 0 scan 1 1000
  ```

## Примеры использования

### Быстрый старт
```cmd
# 1. Установка и запуск сервера
install.bat
# Выберите опцию 1 для установки stealth сервера

# 2. Подключение с другого компьютера
remote_client.exe 192.168.1.100 4444
```

### Сценарии использования

**Локальное администрирование:**
```cmd
# Запуск базового сервера
server.exe

# Подключение локального клиента
client.exe
```

**Удаленное управление через интернет:**
```cmd
# На целевом компьютере
stealth_server.exe

# С удаленного компьютера
remote_client.exe your-external-ip.com 4444
```

**Сканирование сети:**
```cmd
# Поиск открытых портов
remote_client.exe 192.168.1.1 0 scan 1 1000
remote_client.exe 10.0.0.1 0 scan 20 80
```

### Типичные команды

```cmd
# Системная информация
sysinfo
whoami
ipconfig

# Управление файлами
cd C:\Users\Username\Documents
dir
download important.txt

# Мониторинг системы
tasklist
netstat

# Навигация
cd ..
pwd
cd D:\Projects
```

## Особенности

### Безопасность и легальность

⚠️ **КРИТИЧЕСКИ ВАЖНОЕ ПРЕДУПРЕЖДЕНИЕ** ⚠️

### Легальное использование
**РАЗРЕШЕНО:**
- Тестирование собственных систем
- Образовательные цели
- Авторизованное тестирование на проникновение
- Администрирование собственных компьютеров

**ЗАПРЕЩЕНО:**
- Несанкционированный доступ к чужим системам
- Использование без письменного разрешения владельца
- Любая незаконная деятельность

### Риски безопасности
- **Нет шифрования** - весь трафик передается открытым текстом
- **Нет аутентификации** - любой может подключиться к серверу
- **Обнаружение антивирусами** - может быть классифицирован как вредоносное ПО
- **Сетевые логи** - соединения могут отслеживаться
- **Firewall блокировка** - может быть заблокирован сетевыми экранами

### Рекомендации по безопасности

**Для безопасного использования:**
1. **Смените порт по умолчанию:**
   ```cmd
   stealth_server.exe 8443
   ```

2. **Используйте VPN для удаленных подключений:**
   - Настройте VPN сервер (OpenVPN, WireGuard)
   - Подключайтесь только через VPN туннель

3. **Ограничьте доступ по IP:**
   - Настройте firewall правила
   - Используйте только доверенные сети

4. **Мониторинг:**
   - Регулярно проверяйте логи подключений
   - Отслеживайте сетевую активность

5. **Временное использование:**
   - Запускайте сервер только при необходимости
   - Останавливайте после использования

### Обнаружение и противодействие

**Антивирусы могут обнаружить как:**
- Remote Access Tool (RAT)
- Potentially Unwanted Program (PUP)
- Trojan/Backdoor

**Для избежания ложных срабатываний:**
- Добавьте в исключения антивируса
- Используйте только на тестовых системах
- Компилируйте из исходного кода

### Ответственность

**Пользователь несет полную ответственность за:**
- Соблюдение местного законодательства
- Получение необходимых разрешений
- Безопасное использование инструмента
- Любые последствия использования

**Разработчики не несут ответственности за:**
- Незаконное использование
- Ущерб от использования
- Нарушение законодательства пользователями

### Скрытый режим
- Версия `server-stealth.exe` запускается без видимого окна консоли
- Подходит для скрытого развертывания
- Компилируется с флагом `-DSTEALTH_MODE`

## Архитектура

### Серверная часть (server.cpp)
- Создает TCP сокет и слушает входящие соединения
- Принимает команды от клиента
- Выполняет команды через системный вызов
- Отправляет результат обратно клиенту

### Клиентская часть (client.cpp)
- Подключается к серверу по TCP
- Предоставляет интерактивную командную строку
- Отправляет команды на сервер
- Отображает результаты выполнения

## Сетевые настройки

- **Порт по умолчанию:** 4444
- **Протокол:** TCP
- **IP по умолчанию:** 127.0.0.1 (localhost)

## Устранение неполадок

### Ошибки компиляции
- Убедитесь, что установлен MinGW-w64
- Проверьте наличие библиотеки ws2_32

### Ошибки подключения
- Проверьте, что сервер запущен
- Убедитесь, что порт не заблокирован файрволом
- Проверьте правильность IP-адреса

### Ошибки выполнения команд
- Некоторые команды могут требовать прав администратора
- Проверьте синтаксис команды

## Предупреждения

⚠️ **ВНИМАНИЕ:** Данная программа предназначена исключительно для образовательных целей и тестирования в контролируемой среде. Использование для несанкционированного доступа к чужим компьютерам является незаконным.

⚠️ **БЕЗОПАСНОСТЬ:** Программа не содержит механизмов шифрования или аутентификации. Не используйте в производственной среде.

## Лицензия

Данный код предоставляется "как есть" для образовательных целей. Автор не несет ответственности за любое неправомерное использование.